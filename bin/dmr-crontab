#!/usr/bin/env node

var Log = require('../lib/util/log');
var log = new Log(2);
var Schedule = require('../lib/dmr').schedule;

var program = require('commander');

program
  .version('0.1.0', '-v, --version')

 .command('list [value]')
 .action(function(path, cmd){
  Schedule.list().forEach(config => {
    console.log('[%s]\tcrontab [%s]\ttask[%s]\tkey[%s]\tmd5[%s]',
      config.disabled ? 'Disabled':'Enabled', config.crontab, config.task, config.key, config.md5
    );
  });
});
program.command('start [value]')
.action(function(path, cmd){
  if (cmd.parent.args[0]) {
    let schedule = new Schedule(cmd.parent.args[0]);
    schedule.start();
  }
});
// .option('-l, --list', 'List Schedules')
//   .option('-p, --stop [value]', 'Stop Schedules', true)
//   .option('-r, --restart [value]', 'Restart Schedules', true)
//   .option('-l, --list [value]', 'List Schedules in Config', true);


program.on('--help', function(){
    // log.info('');
    // log.info('  Examples:');
    // log.info('');
    // log.info('    $ crontab --start');
    // log.info('    $ crontab --stop');
    // log.info('    $ crontab --restart');
    // log.info('');
});

program.parse(process.argv);